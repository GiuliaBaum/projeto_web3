{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Minha Página</title>
    <link rel="stylesheet" href="{% static 'bd_web3/css/style.css' %}">
    <style>
    .alerta {
        background-color:rgb(250, 208, 212);
        color:rgb(155, 40, 51);
        padding: 10px;
        margin: 10px 0;
        border: 1px solidrgb(250, 191, 197);
        border-radius: 5px;
    }
</style>
</head>
<body>
    <h1>Termine de criar sua conta:</h1>
    <h4>Digite suas informações para concluirmos seu cadastro</h4>

    <form method="post">
        {% csrf_token %}

    <label for="fullname">Nome completo:</label>
        <input type="text" id="fullname" name="fullname" placeholder="Nome completo" required><br><br>

        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email" placeholder="E-mail" required><br><br>

        <label for="tel">Telefone:</label>
        <input type="tel" id="telefone" name="tel" oninput="TEL(this)"  placeholder="(00) 00000-0000" required><br><br>

        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" name="cpf" oninput="CPF(this)" placeholder="000.000.000-00" required><br><br>

        <label for="dataNascimento">Data de nascimento: </label>
        <input type="date" id="dataNascimento" name="dataNascimento" required><br><br>

        <label for="sexo">Gênero:</llabel><br><br>
        <select id="sexo" name="sexo" required>
            <option value=" ">Selecione</option>
            <option value="masculino">Masculino</option>
            <option value="feminino">Feminino</option>
            <option value="outro">Outro</option>
        </select><br><br>

        <input type="submit" value="Cadastre-se">
    </form>
    {% if mensagem %}
    <div class="alerta">
        <p>{{ mensagem }}</p>
    </div>
    {% endif %}
    <script>
        function CPF(input) {
            let value = input.value.replace(/\D/g, ''); 
            value = value.slice(0, 11);
    
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    
            input.value = value;
        }
    
        function TEL(input) {
            let value = input.value.replace(/\D/g, '');
            value = value.slice(0, 11); 
    
            value = value.replace(/^(\d{2})(\d)/g, '($1) $2');
            value = value.replace(/(\d{5})(\d)/, '$1-$2');
    
            input.value = value;
        }

        function EMAIL(input){
            const email = input.value;
            const arroba = email.indexOf('@');
            const ponto = email.lastIndexOf('.');
            
            if(arroba < 1 || ponto < arroba + 2 || ponto === email.length - 1){
                input.setCustomValidity("Digite um e-mail válido.");
            }
            else {
                input.setCustomValidity("");
            }
        }
    </script>
</body>
</html>
